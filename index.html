<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Яндекс.Дом</title>
    <link rel="preload" as="font" href="assets/lato.woff2" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="reset.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
<header class="header">
    <a href="/" class="header__logo" aria-label="Яндекс.Дом"></a>
    <button class="header__menu" aria-expanded="false">
        <span class="header__menu-text a11y-hidden">Открыть меню</span>
    </button>
    <ul class="header__links">
        <li class="header__item">
            <a class="header__link header__link_current" href="/" aria-current="page">Сводка</a>
        </li>
        <li class="header__item">
            <a class="header__link" href="/devices">Устройства</a>
        </li>
        <li class="header__item">
            <a class="header__link" href="/scripts">Сценарии</a>
        </li>
    </ul>
</header>
<main class="main">
    <section class="section main__general">
        <h2 class="section__title section__title-header section__main-title">Главное</h2>
        <div class="hero-dashboard">
            <div class="hero-dashboard__primary">
                <h3 class="hero-dashboard__title">Привет, Геннадий!</h3>
                <p class="hero-dashboard__subtitle">Двери и окна закрыты, сигнализация включена.</p>
                <ul class="hero-dashboard__info">
                    <li class="hero-dashboard__item">
                        <div class="hero-dashboard__item-title">Дома</div>
                        <div class="hero-dashboard__item-details">
                            +23
                            <span class="a11y-hidden">°</span>
                        </div>
                    </li>
                    <li class="hero-dashboard__item">
                        <div class="hero-dashboard__item-title">За окном</div>
                        <div class="hero-dashboard__item-details">
                            +19
                            <span class="a11y-hidden">°</span>
                            <div class="hero-dashboard__icon hero-dashboard__icon_rain" role="img" aria-label="Дождь"></div>
                        </div>
                    </li>
                </ul>
            </div>
            <ul class="hero-dashboard__schedule">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                        <h4 class="event__title">Philips Cooler</h4>
                        <span class="event__subtitle">Начнет охлаждать в 16:30</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
            </ul>
        </div>
    </section>
    <section class="section main__scripts">
        <h2 class="section__title section__title-header">Избранные сценарии</h2>
        <ul class="event-grid">
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                    <h4 class="event__title">Выключить весь свет в доме и во дворе</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_schedule" role="img" aria-label="Расписание"></span>
                    <h4 class="event__title">Я ухожу</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                    <h4 class="event__title">Включить свет в коридоре</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_temp2" role="img" aria-label="Температура"></span>
                    <h4 class="event__title">Набрать горячую ванну</h4>
                    <span class="event__subtitle">Начнётся в 18:00</span>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_temp2" role="img" aria-label="Температура"></span>
                    <h4 class="event__title">Сделать пол тёплым во всей квартире</h4>
                </button>
            </li>
        </ul>
    </section>
    <section class="section main__devices">
        <div class="section__title">
            <h2 class="section__title-header">Избранные устройства</h2>
            <select class="section__select" defaultValue="all">
                <option value="all">Все</option>
                <option value="kitchen">Кухня</option>
                <option value="hall">Зал</option>
                <option value="lights">Лампочки</option>
                <option value="cameras">Камеры</option>
            </select>
            <ul role="tablist" class="section__tabs">
                <li role="tab" aria-selected="true" tabindex="0" class="section__tab section__tab_active" id="tab_all" aria-controls="panel_all">Все</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_kitchen" aria-controls="panel_kitchen">Кухня</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_hall" aria-controls="panel_hall">Зал</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_lights" aria-controls="panel_lights">Лампочки</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_cameras" aria-controls="panel_cameras">Камеры</li>
            </ul>
        </div>
        <div class="section__panel-wrapper">
            <div role="tabpanel" class="section__panel" aria-hidden="false" id="panel_all" aria-labelledby="tab_all">
                <ul class="section__panel-list">
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">D-Link Omna 180 Cam</h4>
                            <span class="event__subtitle">Включится в 17:00</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                            <h4 class="event__title">Elgato Eve Degree Connected</h4>
                            <span class="event__subtitle">Выключено до 17:00</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">LIFX Mini Day & Dusk A60 E27</h4>
                            <span class="event__subtitle">Включится в 17:00</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Philips Zhirui</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Philips Zhirui</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                </ul>
            </div>
            <!-- Остальные панели (kitchen, hall, lights, cameras) аналогично, скрыты по умолчанию -->
            <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_kitchen" aria-labelledby="tab_kitchen">
                <ul class="section__panel-list">
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                            <h4 class="event__title">Elgato Eve Degree Connected</h4>
                            <span class="event__subtitle">Выключено до 17:00</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_hall" aria-labelledby="tab_hall">
                <ul class="section__panel-list">
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Philips Zhirui</h4>
                            <span class="event__subtitle">Выключено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                            <span class="event__subtitle">Выключено</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_lights" aria-labelledby="tab_lights">
                <ul class="section__panel-list">
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">D-Link Omna 180 Cam</h4>
                            <span class="event__subtitle">Включится в 17:00</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">LIFX Mini Day & Dusk A60 E27</h4>
                            <span class="event__subtitle">Включится в 17:00</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Philips Zhirui</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_cameras" aria-labelledby="tab_cameras">
                <ul class="section__panel-list">
                    <li class="event">
                        <button class="event__button">
                            <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                            <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                            <span class="event__subtitle">Включено</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div class="section__arrow"></div>
        </div>
    </section>
</main>

<footer class="footer">
    <ul class="footer__list">
        <li class="footer__item">
            <a class="footer__link" href="/">Помощь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Обратная связь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Разработчикам</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Условия использования</a>
        </li>
    </ul>

    <div class="footer__copyright">
        © 1997–2023 ООО «Яндекс»
    </div>
</footer>


<script>
// Мобильное меню
const menuBtn = document.querySelector('.header__menu');
const menuLinks = document.querySelector('.header__links');
const menuText = document.querySelector('.header__menu-text');
let menuExpanded = false;
let menuToggled = false;
if (menuBtn && menuLinks && menuText) {
    menuBtn.addEventListener('click', function() {
        menuExpanded = !menuExpanded;
        if (!menuToggled) menuToggled = true;
        menuBtn.setAttribute('aria-expanded', menuExpanded ? 'true' : 'false');
        menuLinks.classList.toggle('header__links_opened', menuExpanded);
        menuLinks.classList.toggle('header__links-toggled', menuToggled);
        menuText.textContent = menuExpanded ? 'Закрыть меню' : 'Открыть меню';
    });
}

// Вкладки и select
const tabList = document.querySelector('.section__tabs');
const tabs = tabList ? tabList.querySelectorAll('.section__tab') : [];
const panels = document.querySelectorAll('.section__panel');
const select = document.querySelector('.section__select');
function activateTab(tab) {
    tabs.forEach(t => {
        t.classList.toggle('section__tab_active', t === tab);
        t.setAttribute('aria-selected', t === tab ? 'true' : 'false');
        t.tabIndex = t === tab ? 0 : -1;
    });
    panels.forEach(panel => {
        const isCurrent = panel.id === tab.getAttribute('aria-controls');
        panel.classList.toggle('section__panel_hidden', !isCurrent);
        panel.setAttribute('aria-hidden', isCurrent ? 'false' : 'true');
    });
    fixCardWidths();
}
tabs.forEach(tab => {
    tab.addEventListener('click', () => activateTab(tab));
});
if (select) {
    select.addEventListener('input', function() {
        const key = select.value;
        const tab = document.getElementById('tab_' + key);
        if (tab) activateTab(tab);
    });
}

// Одинаковая ширина карточек
function fixCardWidths() {
    const panel = document.querySelector('.section__panel:not(.section__panel_hidden)');
    if (!panel) return;
    const cards = panel.querySelectorAll('.event');
    cards.forEach(card => card.style.width = '');
    let maxWidth = 0;
    cards.forEach(card => {
        maxWidth = Math.max(maxWidth, card.offsetWidth);
    });
    cards.forEach(card => card.style.width = maxWidth + 'px');
}
window.addEventListener('DOMContentLoaded', fixCardWidths);
window.addEventListener('resize', fixCardWidths);
tabs.forEach(tab => tab.addEventListener('click', () => setTimeout(fixCardWidths, 100)));

// Слайдер: бесконечный скролл по 2 карточки
const panelWrapper = document.querySelector('.section__panel-wrapper');
const arrow = document.querySelector('.section__arrow');
if (panelWrapper && arrow) {
    arrow.style.display = '';
    arrow.addEventListener('click', function() {
        const panel = panelWrapper.querySelector('.section__panel:not(.section__panel_hidden)');
        if (panel) {
            const list = panel.querySelector('.section__panel-list');
            if (list && list.children.length > 2) {
                // Сохраняем ширину карточек
                const cardWidth = list.children[0].offsetWidth;
                const gap = parseInt(getComputedStyle(list).gap) || 0;
                // Сколько карточек скроллить за раз
                const step = 2;
                // Перемещаем step карточек в конец
                for (let i = 0; i < step; i++) {
                    list.appendChild(list.children[0]);
                }
                // Сбросить скролл в начало
                panel.scrollTo({ left: 0, behavior: 'auto' });
                // Плавно прокрутить на step карточек
                panel.scrollTo({ left: (cardWidth + gap) * step, behavior: 'smooth' });
                setTimeout(() => panel.scrollTo({ left: 0, behavior: 'auto' }), 350);
                setTimeout(fixCardWidths, 100);
            }
        }
    });
}
</script>

</body>
</html>
