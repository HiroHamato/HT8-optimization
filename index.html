<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Яндекс.Дом</title>
    <link rel="preload" as="font" href="assets/lato.woff2" type="font/woff2" crossorigin="anonymous">
    <script src="vendors/react-with-dom.js"></script>
    <link rel="stylesheet" type="text/css" href="reset.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>

<div id="app"></div>

<footer class="footer">
    <ul class="footer__list">
        <li class="footer__item">
            <a class="footer__link" href="/">Помощь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Обратная связь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Разработчикам</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Условия использования</a>
        </li>
    </ul>

    <div class="footer__copyright">
        © 1997–2023 ООО «Яндекс»
    </div>
</footer>

<script type="text/javascript">
(function() {
    "use strict";
    
    function Header() {
        var _React$useState = React.useState(false),
            expanded = _React$useState[0],
            setExpanded = _React$useState[1];
        
        var _React$useState2 = React.useState(false),
            toggled = _React$useState2[0],
            setToggled = _React$useState2[1];
        
        var onClick = function onClick() {
            if (!toggled) {
                setToggled(true);
            }
            setExpanded(!expanded);
        };
        
        return React.createElement(
            'header',
            { className: 'header' },
            React.createElement('a', {
                href: '/',
                className: 'header__logo',
                'aria-label': 'Яндекс.Дом'
            }),
            React.createElement(
                'button',
                {
                    className: 'header__menu',
                    'aria-expanded': expanded ? 'true' : 'false',
                    onClick: onClick
                },
                React.createElement(
                    'span',
                    { className: 'header__menu-text a11y-hidden' },
                    expanded ? 'Закрыть меню' : 'Открыть меню'
                )
            ),
            React.createElement(
                'ul',
                {
                    className: 'header__links' + 
                        (expanded ? ' header__links_opened' : '') + 
                        (toggled ? ' header__links-toggled' : '')
                },
                React.createElement(
                    'li',
                    { className: 'header__item' },
                    React.createElement(
                        'a',
                        {
                            className: 'header__link header__link_current',
                            href: '/',
                            'aria-current': 'page'
                        },
                        'Сводка'
                    )
                ),
                React.createElement(
                    'li',
                    { className: 'header__item' },
                    React.createElement(
                        'a',
                        { className: 'header__link', href: '/devices' },
                        'Устройства'
                    )
                ),
                React.createElement(
                    'li',
                    { className: 'header__item' },
                    React.createElement(
                        'a',
                        { className: 'header__link', href: '/scripts' },
                        'Сценарии'
                    )
                )
            )
        );
    }

    var Event = React.memo(function Event(props) {
        var ref = React.useRef();
        var prevSize = React.useRef({ width: 0, height: 0 });
        
        React.useLayoutEffect(function() {
            if (!ref.current || !props.onSize) return;
            
            var width = ref.current.offsetWidth;
            var height = ref.current.offsetHeight;
            
            if (width !== prevSize.current.width || height !== prevSize.current.height) {
                prevSize.current = { width: width, height: height };
                props.onSize(props.id, { width: width, height: height });
            }
        }, [props.onSize, props.id]);
        
        var buttonChildren = [
            React.createElement('span', {
                key: 'icon',
                className: 'event__icon event__icon_' + props.icon,
                role: 'img',
                'aria-label': props.iconLabel || ''
            }),
            React.createElement('h4', { key: 'title', className: 'event__title' }, props.title)
        ];
        
        if (props.subtitle) {
            buttonChildren.push(
                React.createElement('span', { key: 'subtitle', className: 'event__subtitle' }, props.subtitle)
            );
        }
        
        return React.createElement(
            'li',
            {
                ref: ref,
                className: props.slim ? 'event event_slim' : 'event'
            },
            React.createElement(
                'button',
                { className: 'event__button' },
                buttonChildren
            )
        );
    });

    var TABS = {
        all: {
            title: 'Все',
            items: [{
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Yeelight LED Smart Bulb',
                subtitle: 'Включено'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'D-Link Omna 180 Cam',
                subtitle: 'Включится в 17:00'
            }, {
                icon: 'temp',
                iconLabel: 'Температура',
                title: 'Elgato Eve Degree Connected',
                subtitle: 'Выключено до 17:00'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'LIFX Mini Day & Dusk A60 E27',
                subtitle: 'Включится в 17:00'
            }, {
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Mi Air Purifier 2S',
                subtitle: 'Включено'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'Philips Zhirui',
                subtitle: 'Включено'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'Philips Zhirui',
                subtitle: 'Включено'
            }, {
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Mi Air Purifier 2S',
                subtitle: 'Включено'
            }]
        },
        kitchen: {
            title: 'Кухня',
            items: [{
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Yeelight LED Smart Bulb',
                subtitle: 'Включено'
            }, {
                icon: 'temp',
                iconLabel: 'Температура',
                title: 'Elgato Eve Degree Connected',
                subtitle: 'Выключено до 17:00'
            }]
        },
        hall: {
            title: 'Зал',
            items: [{
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'Philips Zhirui',
                subtitle: 'Выключено'
            }, {
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Mi Air Purifier 2S',
                subtitle: 'Выключено'
            }]
        },
        lights: {
            title: 'Лампочки',
            items: [{
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'D-Link Omna 180 Cam',
                subtitle: 'Включится в 17:00'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'LIFX Mini Day & Dusk A60 E27',
                subtitle: 'Включится в 17:00'
            }, {
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Mi Air Purifier 2S',
                subtitle: 'Включено'
            }, {
                icon: 'light',
                iconLabel: 'Освещение',
                title: 'Philips Zhirui',
                subtitle: 'Включено'
            }]
        },
        cameras: {
            title: 'Камеры',
            items: [{
                icon: 'light2',
                iconLabel: 'Освещение',
                title: 'Xiaomi Mi Air Purifier 2S',
                subtitle: 'Включено'
            }]
        }
    };
    
    for (var i = 0; i < 6; i++) {
        TABS.all.items = TABS.all.items.concat(TABS.all.items.slice());
    }
    
    var TABS_KEYS = Object.keys(TABS);

    function Main() {
        var _React$useState3 = React.useState(''),
            activeTab = _React$useState3[0],
            setActiveTab = _React$useState3[1];
        
        var _React$useState4 = React.useState(false),
            hasRightScroll = _React$useState4[0],
            setHasRightScroll = _React$useState4[1];
        
        var _React$useState5 = React.useState({}),
            sizes = _React$useState5[0],
            setSizes = _React$useState5[1];
        
        var containerRef = React.useRef();
        var initialized = React.useRef(false);
        
        React.useEffect(function() {
            if (!initialized.current) {
                initialized.current = true;
                var params = new URLSearchParams(window.location.search);
                setActiveTab(params.get('tab') || 'all');
            }
        }, []);
        
        var onSelectInput = function onSelectInput(event) {
            setActiveTab(event.target.value);
        };
        
        var handleSize = React.useCallback(function(id, size) {
            setSizes(function(prev) {
                if (prev[id] && prev[id].width === size.width && prev[id].height === size.height) {
                    return prev;
                }
                var newSizes = Object.assign({}, prev);
                newSizes[id] = size;
                return newSizes;
            });
        }, []);
        
        React.useLayoutEffect(function() {
            if (!activeTab || !containerRef.current) return;
            
            var panel = containerRef.current.querySelector('.section__panel:not(.section__panel_hidden)');
            if (!panel) return;
            
            var totalWidth = 0;
            var currentItems = TABS[activeTab].items;
            for (var i = 0; i < currentItems.length; i++) {
                var id = activeTab + '-' + i;
                if (sizes[id]) {
                    totalWidth += sizes[id].width;
                }
            }
            
            setHasRightScroll(totalWidth > panel.clientWidth);
        }, [sizes, activeTab]);
        
        var onArrowClick = function onArrowClick() {
            var panel = containerRef.current.querySelector('.section__panel:not(.section__panel_hidden)');
            if (panel) {
                panel.scrollBy({ left: 400, behavior: 'smooth' });
            }
        };
        
        var createDeviceElements = function createDeviceElements(tabKey) {
            var items = TABS[tabKey].items;
            return items.map(function(item, index) {
                var id = tabKey + '-' + index;
                return React.createElement(Event, {
                    key: id,
                    id: id,
                    icon: item.icon,
                    iconLabel: item.iconLabel,
                    title: item.title,
                    subtitle: item.subtitle,
                    onSize: handleSize
                });
            });
        };
        
        return React.createElement(
            'main',
            { className: 'main' },
            React.createElement(
                'section',
                { className: 'section main__general' },
                React.createElement(
                    'h2',
                    { className: 'section__title section__title-header section__main-title' },
                    'Главное'
                ),
                React.createElement(
                    'div',
                    { className: 'hero-dashboard' },
                    React.createElement(
                        'div',
                        { className: 'hero-dashboard__primary' },
                        React.createElement(
                            'h3',
                            { className: 'hero-dashboard__title' },
                            'Привет, Геннадий!'
                        ),
                        React.createElement(
                            'p',
                            { className: 'hero-dashboard__subtitle' },
                            'Двери и окна закрыты, сигнализация включена.'
                        ),
                        React.createElement(
                            'ul',
                            { className: 'hero-dashboard__info' },
                            React.createElement(
                                'li',
                                { className: 'hero-dashboard__item' },
                                React.createElement(
                                    'div',
                                    { className: 'hero-dashboard__item-title' },
                                    'Дома'
                                ),
                                React.createElement(
                                    'div',
                                    { className: 'hero-dashboard__item-details' },
                                    '+23',
                                    React.createElement(
                                        'span',
                                        { className: 'a11y-hidden' },
                                        '°'
                                    )
                                )
                            ),
                            React.createElement(
                                'li',
                                { className: 'hero-dashboard__item' },
                                React.createElement(
                                    'div',
                                    { className: 'hero-dashboard__item-title' },
                                    'За окном'
                                ),
                                React.createElement(
                                    'div',
                                    { className: 'hero-dashboard__item-details' },
                                    '+19',
                                    React.createElement(
                                        'span',
                                        { className: 'a11y-hidden' },
                                        '°'
                                    ),
                                    React.createElement('div', {
                                        className: 'hero-dashboard__icon hero-dashboard__icon_rain',
                                        role: 'img',
                                        'aria-label': 'Дождь'
                                    })
                                )
                            )
                        )
                    ),
                    React.createElement(
                        'ul',
                        { className: 'hero-dashboard__schedule' },
                        React.createElement(Event, {
                            icon: 'temp',
                            iconLabel: 'Температура',
                            title: 'Philips Cooler',
                            subtitle: 'Начнет охлаждать в 16:30'
                        }),
                        React.createElement(Event, {
                            icon: 'light',
                            iconLabel: 'Освещение',
                            title: 'Xiaomi Yeelight LED Smart Bulb',
                            subtitle: 'Включится в 17:00'
                        }),
                        React.createElement(Event, {
                            icon: 'light',
                            iconLabel: 'Освещение',
                            title: 'Xiaomi Yeelight LED Smart Bulb',
                            subtitle: 'Включится в 17:00'
                        })
                    )
                )
            ),
            React.createElement(
                'section',
                { className: 'section main__scripts' },
                React.createElement(
                    'h2',
                    { className: 'section__title section__title-header' },
                    'Избранные сценарии'
                ),
                React.createElement(
                    'ul',
                    { className: 'event-grid' },
                    React.createElement(Event, {
                        slim: true,
                        icon: 'light2',
                        iconLabel: 'Освещение',
                        title: 'Выключить весь свет в доме и во дворе'
                    }),
                    React.createElement(Event, {
                        slim: true,
                        icon: 'schedule',
                        iconLabel: 'Расписание',
                        title: 'Я ухожу'
                    }),
                    React.createElement(Event, {
                        slim: true,
                        icon: 'light2',
                        iconLabel: 'Освещение',
                        title: 'Включить свет в коридоре'
                    }),
                    React.createElement(Event, {
                        slim: true,
                        icon: 'temp2',
                        iconLabel: 'Температура',
                        title: 'Набрать горячую ванну',
                        subtitle: 'Начнётся в 18:00'
                    }),
                    React.createElement(Event, {
                        slim: true,
                        icon: 'temp2',
                        iconLabel: 'Температура',
                        title: 'Сделать пол тёплым во всей квартире'
                    })
                )
            ),
            React.createElement(
                'section',
                { className: 'section main__devices' },
                React.createElement(
                    'div',
                    { className: 'section__title' },
                    React.createElement(
                        'h2',
                        { className: 'section__title-header' },
                        'Избранные устройства'
                    ),
                    React.createElement(
                        'select',
                        { 
                            className: 'section__select', 
                            value: activeTab || 'all',
                            onInput: onSelectInput
                        },
                        TABS_KEYS.map(function(key) {
                            return React.createElement(
                                'option',
                                { key: key, value: key },
                                TABS[key].title
                            );
                        })
                    ),
                    React.createElement(
                        'ul',
                        { role: 'tablist', className: 'section__tabs' },
                        TABS_KEYS.map(function(key) {
                            return React.createElement(
                                'li',
                                {
                                    key: key,
                                    role: 'tab',
                                    'aria-selected': key === activeTab ? 'true' : 'false',
                                    className: 'section__tab' + (key === activeTab ? ' section__tab_active' : ''),
                                    id: 'tab_' + key,
                                    'aria-controls': 'panel_' + key,
                                    onClick: function() { return setActiveTab(key); }
                                },
                                TABS[key].title
                            );
                        })
                    )
                ),
                React.createElement(
                    'div',
                    { className: 'section__panel-wrapper', ref: containerRef },
                    TABS_KEYS.map(function(key) {
                        return React.createElement(
                            'div',
                            {
                                key: key,
                                role: 'tabpanel',
                                className: 'section__panel' + (key === activeTab ? '' : ' section__panel_hidden'),
                                'aria-hidden': key !== activeTab ? 'true' : 'false',
                                id: 'panel_' + key,
                                'aria-labelledby': 'tab_' + key
                            },
                            React.createElement(
                                'ul',
                                { className: 'section__panel-list' },
                                key === activeTab ? createDeviceElements(key) : null
                            )
                        );
                    }),
                    hasRightScroll && React.createElement('div', {
                        className: 'section__arrow',
                        onClick: onArrowClick
                    })
                )
            )
        );
    }

    document.addEventListener('DOMContentLoaded', function() {
        var root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(React.createElement(React.Fragment, null,
            React.createElement(Header, null),
            React.createElement(Main, null)
        ));
    });
})();
</script>

</body>
</html>