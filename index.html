<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Яндекс.Дом</title>
    <style>
        html{font-size:100%;font-family:Arial,sans-serif;line-height:1.25}body{display:flex;flex-direction:column;font-family:inherit;line-height:inherit;margin:0}html,body{height:100%}.a11y-hidden{position:absolute;left:auto;height:1px;width:1px;top:0;overflow:hidden;clip:rect(1px)}.header{position:relative;display:flex;flex:0 0 auto;align-items:center;height:5.75rem;margin-bottom:1.875rem;padding:0 2.5rem;font-family:Arial,sans-serif;border-bottom:1px solid #f0f0f0}@media (max-width:768px){.header{height:4rem;margin-bottom:0;padding:0 0 0 1.25rem;border-bottom:none}}.header__logo{flex:0 0 auto;width:6.75rem;height:2.3125rem;margin-right:3.25rem;background:no-repeat 50%/contain url(assets/logo.svg)}.header__menu{display:none;width:3.5rem;height:100%;margin:0 0 0 auto;padding:0;background:50% 50% no-repeat url(assets/icon_list_m@1x.svg);border:none;border-radius:0;appearance:none;cursor:pointer}@media (max-width:768px){.header__menu{display:block}}.header__links{display:flex;gap:1.75rem;margin:0;padding:0;list-style:none}@media (max-width:768px){.header__links{display:none;position:absolute;z-index:1;top:100%;left:0;box-sizing:border-box;flex-direction:column;width:100%;padding:1.25rem;background:#fff;box-shadow:0 2px 6px 0 rgba(197,186,186,.5)}.header__links-toggled,.header__links_opened{display:flex;animation-fill-mode:both}.header__links_opened{animation:.3s ease-in-out showMenu;visibility:visible}.header__links-toggled{animation:.3s ease-in-out hideMenu}}@keyframes showMenu{from{transform:translateY(-1rem);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes hideMenu{from{transform:translateY(0);opacity:1;visibility:visible}to{transform:translateY(-1rem);opacity:0;visibility:hidden}}.header__item{margin:0;padding:0}.header__link{font-weight:700;opacity:.6;transition:opacity .15s ease-in-out;text-decoration:none;color:#333}.header__link:hover{opacity:1}.header__link_current{opacity:1}.main{display:grid;flex:0 0 auto;grid-template-columns:50% 50%;gap:1.625rem;padding:0 2.5rem}@media (max-width:768px){.main{padding:0 1.25rem}}@media (max-width:1024px){.main{grid-template-columns:100%}}.main__devices{grid-column:1/3}@media (max-width:1024px){.main__devices{grid-column-end:2}}.section__title-header{margin:0;font-size:1.125rem;font-weight:700;color:#333}.section__title{display:flex;align-items:baseline;margin:0 0 1.25rem}@media (max-width:768px){.section__title{gap:1rem}.section__main-title{display:none}}.section__select{display:none;margin:0 0 0 auto;padding:.4375rem 1.9375rem .5rem 1rem;border:none;border-radius:1.25rem;font-size:.8125rem;font-family:inherit;font-weight:700;background:no-repeat calc(100% - 1rem) 50% #ffd93e url(assets/arrow-down.svg);appearance:none}@media (max-width:768px){.section__select{display:block}}.section__tabs{display:flex;gap:.625rem;align-items:baseline;margin:0 0 0 .8125rem;padding:0;list-style:none}@media (max-width:768px){.section__tabs{display:none}}.section__tab{flex:0 0 auto;padding:.4375rem .9375rem .5rem;font-size:.8125rem;font-weight:700;background:#f7f7f7;border-radius:1024px;cursor:pointer;transition:.25s ease-in-out;transition-property:background-color,box-shadow}.section__tab_active{background:#ffd93e}.section__tab:not(.section__tab_active):hover{background:#fff;box-shadow:0 2px 6px 0 rgba(197,186,186,.5)}.hero-dashboard{position:relative;box-sizing:border-box;display:flex;gap:.9375rem;height:20.6875rem;background:no-repeat 50%/1260px url(assets/bg2x_1_11zon.webp);border-radius:1.25rem}@media (max-width:768px){.hero-dashboard{flex-direction:column;gap:1.25rem;height:auto;margin-bottom:.3125rem;background-image:none}}.hero-dashboard__primary{flex:1 1 auto;padding:1.25rem 0 1.25rem 1.25rem}@media (max-width:768px){.hero-dashboard__primary{padding:1.25rem 1.25rem 0}}.hero-dashboard__title{margin:.375rem 0;font-size:1.6875rem;font-weight:700;color:#333}@media (max-width:768px){.hero-dashboard__title{font-size:1.125rem}}.hero-dashboard__subtitle{margin:.375rem 0 0;font-size:.875rem;color:#333}@media (max-width:768px){.hero-dashboard__subtitle{margin:.3125rem 0 0;font-size:.75rem}}.hero-dashboard__info{display:flex;gap:1.125rem;margin:1.5625rem 0 0;padding:0;list-style:none}@media (max-width:768px){.hero-dashboard__info{margin-top:.9375rem}}.hero-dashboard__item{margin:0;padding:0}.hero-dashboard__item-title{font-size:.875rem;color:#858585}@media (max-width:768px){.hero-dashboard__item-title{font-size:.75rem}}.hero-dashboard__item-details{display:flex;align-items:center;margin-top:.25rem;font-size:2.25rem;font-weight:700;color:#333}@media (max-width:768px){.hero-dashboard__item-details{margin-top:.3125rem;font-size:1.5rem}}.hero-dashboard__icon{width:1.625rem;height:1.625rem;margin-left:.3125rem;background-position:50%;background-repeat:no-repeat;background-size:contain}@media (max-width:768px){.hero-dashboard__icon{width:1.375rem;height:1.375rem}}.hero-dashboard__icon_rain{background-image:url(assets/cloud-drizzle.svg)}.hero-dashboard__schedule{display:flex;flex:0 0 auto;flex-direction:column;gap:.9375rem;margin:0;padding:1.25rem 1.5625rem 1.25rem 0;overflow:auto;list-style:none;scrollbar-width:none}.hero-dashboard__schedule::-webkit-scrollbar{display:none}@media (max-width:768px){.hero-dashboard__schedule{flex-direction:row;padding:0 1.25rem 1.25rem}}.event-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.9375rem;margin:0;padding:0;list-style:none}@media (max-width:768px){.event-grid{display:flex;padding-bottom:.3125rem;overflow:auto;scrollbar-width:none}.event-grid::-webkit-scrollbar{display:none}}.section__panel{padding-bottom:.625rem;overflow-x:auto;scrollbar-width:none}.section__panel::-webkit-scrollbar{display:none}.section__panel_hidden{display:none}.section__panel-list{display:flex;gap:.9375rem;margin:0;padding:0;list-style:none}.section__panel-wrapper{position:relative}.section__arrow{position:absolute;top:0;right:0;width:18px;bottom:10px;background:no-repeat 50% url(./assets/arrow-left.png);transform:rotate(180deg);cursor:pointer}.section__arrow:hover{opacity:.7}.footer{display:flex;flex:0 0 auto;align-items:center;height:4rem;margin-top:auto;padding:0 2.5rem}@media (max-width:768px){.footer{flex-direction:column;align-items:flex-start;gap:.9375rem;height:auto;padding:1rem 2.5rem}}.footer__list{display:flex;align-items:baseline;gap:.9375rem;margin:0;padding:0;list-style:none}@media (max-width:768px){.footer__list{flex-direction:column;align-items:flex-start}}.footer__link{font-size:.75rem;color:#858585;transition:opacity .15s ease-in-out;text-decoration:none}.footer__link:hover{color:#000}.footer__copyright{margin-left:auto;font-size:.75rem;color:#858585}@media (max-width:768px){.footer__copyright{margin-left:0}}.event__button{position:relative;display:flex;flex-direction:column;justify-content:end;gap:.1875rem;width:100%;min-width:12.5rem;height:7.5rem;margin:0;padding:.875rem;border-radius:1.25rem;border:none;background:#f7f7f7;text-align:left;transition:.25s ease-in-out;transition-property:background-color,box-shadow;cursor:pointer;appearance:none}.event_slim .event__button{height:6.25rem}.event__button:hover{background:#fff;box-shadow:0 2px 6px 0 rgba(197,186,186,.5)}.event__icon{position:absolute;top:.875rem;left:.875rem;width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-position:50%;background-size:contain}.event__icon_temp{background-image:url(assets/icon_temperature.svg)}.event__icon_temp2{background-image:url(assets/icon_temperature_2.svg)}.event__icon_light{background-image:url(assets/icon_sun.svg)}.event__icon_light2{background-image:url(assets/icon_sun_2.svg)}.event__icon_schedule{background-image:url(assets/icon_scheduled.svg)}.event__title{margin:0;font-size:.875rem;font-weight:700;color:#333}.event__subtitle{font-size:.75rem;color:#858585}
    </style>
</head>
<body>

<div id="app"></div>

<footer class="footer">
    <ul class="footer__list">
        <li class="footer__item">
            <a class="footer__link" href="/">Помощь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Обратная связь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Разработчикам</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Условия использования</a>
        </li>
    </ul>

    <div class="footer__copyright">
        © 1997–2023 ООО «Яндекс»
    </div>
</footer>

</body>
</html>

<script>
    const TABS_BASE = {
  all: {
    title: "Все",
    items: [
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Yeelight LED Smart Bulb",
        subtitle: "Включено",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "D-Link Omna 180 Cam",
        subtitle: "Включится в 17:00",
      },
      {
        icon: "temp",
        iconLabel: "Температура",
        title: "Elgato Eve Degree Connected",
        subtitle: "Выключено до 17:00",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "LIFX Mini Day & Dusk A60 E27",
        subtitle: "Включится в 17:00",
      },
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Mi Air Purifier 2S",
        subtitle: "Включено",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "Philips Zhirui",
        subtitle: "Включено",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "Philips Zhirui",
        subtitle: "Включено",
      },
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Mi Air Purifier 2S",
        subtitle: "Включено",
      },
    ],
  },
  kitchen: {
    title: "Кухня",
    items: [
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Yeelight LED Smart Bulb",
        subtitle: "Включено",
      },
      {
        icon: "temp",
        iconLabel: "Температура",
        title: "Elgato Eve Degree Connected",
        subtitle: "Выключено до 17:00",
      },
    ],
  },
  hall: {
    title: "Зал",
    items: [
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "Philips Zhirui",
        subtitle: "Выключено",
      },
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Mi Air Purifier 2S",
        subtitle: "Выключено",
      },
    ],
  },
  lights: {
    title: "Лампочки",
    items: [
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "D-Link Omna 180 Cam",
        subtitle: "Включится в 17:00",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "LIFX Mini Day & Dusk A60 E27",
        subtitle: "Включится в 17:00",
      },
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Mi Air Purifier 2S",
        subtitle: "Включено",
      },
      {
        icon: "light",
        iconLabel: "Освещение",
        title: "Philips Zhirui",
        subtitle: "Включено",
      },
    ],
  },
  cameras: {
    title: "Камеры",
    items: [
      {
        icon: "light2",
        iconLabel: "Освещение",
        title: "Xiaomi Mi Air Purifier 2S",
        subtitle: "Включено",
      },
    ],
  },
};

function generateAllItems() {
  let items = [...TABS_BASE.all.items];
  for (let i = 0; i < 6; i++) {
    items = [...items, ...items];
  }
  return items;
}

const TABS = {
  ...TABS_BASE,
  all: {
    ...TABS_BASE.all,
    items: generateAllItems(),
  },
};
const TABS_KEYS = Object.keys(TABS);

const el = (tag, attrs = {}, children = []) => {
  const element = document.createElement(tag);

  Object.entries(attrs).forEach(([key, value]) => {
    if (key === "className") {
      element.className = value;
    } else if (key.startsWith("on")) {
      element.addEventListener(key.slice(2).toLowerCase(), value);
    } else if (key === "textContent") {
      element.textContent = value;
    } else {
      element.setAttribute(key, value);
    }
  });

  children.forEach((child) => {
    if (typeof child === "string") {
      element.appendChild(document.createTextNode(child));
    } else if (child) {
      element.appendChild(child);
    }
  });

  return element;
};

function createHeader() {
  const linksData = [
    { text: "Сводка", href: "/", current: true },
    { text: "Устройства", href: "/devices" },
    { text: "Сценарии", href: "/scripts" },
  ];

  const linksList = el(
    "ul",
    { className: "header__links" },
    linksData.map((linkData) =>
      el("li", { className: "header__item" }, [
        el(
          "a",
          {
            className: `header__link${
              linkData.current ? " header__link_current" : ""
            }`,
            href: linkData.href,
            ...(linkData.current ? { "aria-current": "page" } : {}),
          },
          [linkData.text]
        ),
      ])
    )
  );

  const menuButton = el(
    "button",
    {
      className: "header__menu",
      "aria-expanded": "false",
      onclick: function () {
        const expanded = this.getAttribute("aria-expanded") === "true";
        this.setAttribute("aria-expanded", String(!expanded));
        this.firstChild.textContent = expanded
          ? "Открыть меню"
          : "Закрыть меню";
        linksList.classList.toggle("header__links_opened", !expanded);

        if (!this.dataset.toggled) {
          this.dataset.toggled = true;
          linksList.classList.add("header__links-toggled");
        }
      },
    },
    [
      el("span", {
        className: "header__menu-text a11y-hidden",
        textContent: "Открыть меню",
      }),
    ]
  );

  return el("header", { className: "header" }, [
    el("a", {
      className: "header__logo",
      href: "/",
      "aria-label": "Яндекс.Дом",
    }),
    menuButton,
    linksList,
  ]);
}

function createEvent(props) {
  return el("li", { className: props.slim ? "event event_slim" : "event" }, [
    el("button", { className: "event__button" }, [
      el("span", {
        className: `event__icon event__icon_${props.icon}`,
        role: "img",
        "aria-label": props.iconLabel || "",
      }),
      el("h4", { className: "event__title" }, [props.title]),
      ...(props.subtitle
        ? [el("span", { className: "event__subtitle" }, [props.subtitle])]
        : []),
    ]),
  ]);
}

function createMain() {
  const heroDashboard = el("div", { className: "hero-dashboard" }, [
    el("div", { className: "hero-dashboard__primary" }, [
      el("h3", { className: "hero-dashboard__title" }, ["Привет, Геннадий!"]),
      el("p", { className: "hero-dashboard__subtitle" }, [
        "Двери и окна закрыты, сигнализация включена.",
      ]),
      el("ul", { className: "hero-dashboard__info" }, [
        el("li", { className: "hero-dashboard__item" }, [
          el("div", { className: "hero-dashboard__item-title" }, ["Дома"]),
          el("div", { className: "hero-dashboard__item-details" }, [
            "+23",
            el("span", { className: "a11y-hidden" }, ["°"]),
          ]),
        ]),
        el("li", { className: "hero-dashboard__item" }, [
          el("div", { className: "hero-dashboard__item-title" }, ["За окном"]),
          el("div", { className: "hero-dashboard__item-details" }, [
            "+19",
            el("span", { className: "a11y-hidden" }, ["°"]),
            el("div", {
              className: "hero-dashboard__icon hero-dashboard__icon_rain",
              role: "img",
              "aria-label": "Дождь",
            }),
          ]),
        ]),
      ]),
    ]),
    el("ul", { className: "hero-dashboard__schedule" }, [
      createEvent({
        icon: "temp",
        iconLabel: "Температура",
        title: "Philips Cooler",
        subtitle: "Начнет охлаждать в 16:30",
      }),
      createEvent({
        icon: "light",
        iconLabel: "Освещение",
        title: "Xiaomi Yeelight LED Smart Bulb",
        subtitle: "Включится в 17:00",
      }),
      createEvent({
        icon: "light",
        iconLabel: "Освещение",
        title: "Xiaomi Yeelight LED Smart Bulb",
        subtitle: "Включится в 17:00",
      }),
    ]),
  ]);

  const scriptsGrid = el("ul", { className: "event-grid" }, [
    createEvent({
      slim: true,
      icon: "light2",
      iconLabel: "Освещение",
      title: "Выключить весь свет в доме и во дворе",
    }),
    createEvent({
      slim: true,
      icon: "schedule",
      iconLabel: "Расписание",
      title: "Я ухожу",
    }),
    createEvent({
      slim: true,
      icon: "light2",
      iconLabel: "Освещение",
      title: "Включить свет в коридоре",
    }),
    createEvent({
      slim: true,
      icon: "temp2",
      iconLabel: "Температура",
      title: "Набрать горячую ванну",
      subtitle: "Начнётся в 18:00",
    }),
    createEvent({
      slim: true,
      icon: "temp2",
      iconLabel: "Температура",
      title: "Сделать пол тёплым во всей квартире",
    }),
  ]);

  const select = el(
    "select",
    { className: "section__select" },
    TABS_KEYS.map((key) => el("option", { value: key }, [TABS[key].title]))
  );

  const tabsList = el(
    "ul",
    { className: "section__tabs", role: "tablist" },
    TABS_KEYS.map((key) =>
      el(
        "li",
        {
          className: `section__tab${
            key === "all" ? " section__tab_active" : ""
          }`,
          role: "tab",
          "aria-selected": key === "all" ? "true" : "false",
          tabindex: key === "all" ? "0" : "-1",
          id: `tab_${key}`,
          "aria-controls": `panel_${key}`,
          "data-tabkey": key,
        },
        [TABS[key].title]
      )
    )
  );

  const panelWrapper = el("div", { className: "section__panel-wrapper" }, [
    ...TABS_KEYS.map((key) =>
      el(
        "div",
        {
          className: `section__panel${
            key === "all" ? "" : " section__panel_hidden"
          }`,
          role: "tabpanel",
          "aria-hidden": key === "all" ? "false" : "true",
          id: `panel_${key}`,
          "aria-labelledby": `tab_${key}`,
        },
        [el("ul", { className: "section__panel-list" })]
      )
    ),
    el("div", { className: "section__arrow", style: "display: none" }),
  ]);

  return el("main", { className: "main" }, [
    el("section", { className: "section main__general" }, [
      el(
        "h2",
        {
          className: "section__title section__title-header section__main-title",
        },
        ["Главное"]
      ),
      heroDashboard,
    ]),
    el("section", { className: "section main__scripts" }, [
      el("h2", { className: "section__title section__title-header" }, [
        "Избранные сценарии",
      ]),
      scriptsGrid,
    ]),
    el("section", { className: "section main__devices" }, [
      el("div", { className: "section__title" }, [
        el("h2", { className: "section__title-header" }, [
          "Избранные устройства",
        ]),
        select,
        tabsList,
      ]),
      panelWrapper,
    ]),
  ]);
}

document.addEventListener("DOMContentLoaded", function () {
  const appContainer = document.getElementById("app");
  appContainer.appendChild(createHeader());
  appContainer.appendChild(createMain());

  let activeTab = "all";
  const panelWrapper = document.querySelector(".section__panel-wrapper");
  const arrow = panelWrapper.querySelector(".section__arrow");
  const tabs = document.querySelectorAll(".section__tab");
  const select = document.querySelector(".section__select");

  function fillTab(tabKey) {
    const panel = document.querySelector(`#panel_${tabKey}`);
    const list = panel.querySelector(".section__panel-list");

    if (list.children.length > 0) {
      list.innerHTML = "";
    }

    const fragment = document.createDocumentFragment();

    TABS[tabKey].items.forEach((item) => {
      fragment.appendChild(createEvent(item));
    });

    list.appendChild(fragment);
  }

  function checkScrollNeeded() {
    const activePanel = panelWrapper.querySelector(`#panel_${activeTab}`);
    if (!activePanel) return;

    const list = activePanel.querySelector(".section__panel-list");
    if (!list) return;

    const hasScroll = list.scrollWidth > activePanel.offsetWidth;
    arrow.style.display = hasScroll ? "block" : "none";
  }

  function setActiveTab(tabKey) {
    if (activeTab === tabKey) return;

    document
      .querySelector(`.section__tab[data-tabkey="${activeTab}"]`)
      .classList.remove("section__tab_active");
    document
      .querySelector(`.section__tab[data-tabkey="${activeTab}"]`)
      .setAttribute("aria-selected", "false");
    document
      .querySelector(`.section__tab[data-tabkey="${activeTab}"]`)
      .setAttribute("tabindex", "-1");

    document
      .querySelector(`.section__tab[data-tabkey="${tabKey}"]`)
      .classList.add("section__tab_active");
    document
      .querySelector(`.section__tab[data-tabkey="${tabKey}"]`)
      .setAttribute("aria-selected", "true");
    document
      .querySelector(`.section__tab[data-tabkey="${tabKey}"]`)
      .setAttribute("tabindex", "0");

    document
      .querySelector(`#panel_${activeTab}`)
      .classList.add("section__panel_hidden");
    document
      .querySelector(`#panel_${activeTab}`)
      .setAttribute("aria-hidden", "true");

    document
      .querySelector(`#panel_${tabKey}`)
      .classList.remove("section__panel_hidden");
    document
      .querySelector(`#panel_${tabKey}`)
      .setAttribute("aria-hidden", "false");

    activeTab = tabKey;
    select.value = tabKey;

    fillTab(tabKey);

    setTimeout(checkScrollNeeded, 10);
  }

  select.addEventListener("change", (e) => setActiveTab(e.target.value));

  tabs.forEach((tab) => {
    tab.addEventListener("click", () => setActiveTab(tab.dataset.tabkey));
  });

  arrow.addEventListener("click", () => {
    const activePanel = panelWrapper.querySelector(`#panel_${activeTab}`);
    if (activePanel) {
      activePanel.scrollBy({ left: 400, behavior: "smooth" });
    }
  });

  TABS_KEYS.forEach((key) => fillTab(key));

    checkScrollNeeded();
window.addEventListener("resize", checkScrollNeeded);
});
</script>